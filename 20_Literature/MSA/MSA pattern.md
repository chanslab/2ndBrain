#MSA_Pattern #MSA #SAGA


==**MSA(Microservices Architecture) 패턴**은 하나의 거대한 애플리케이션을 여러 개의 작고 독립적인 서비스로 나누어 개발하고 운영하는 설계 방식==입니다. 각 서비스는 특정 비즈니스 기능을 수행하며, 서로 독립적으로 배포되고 확장될 수 있다는 점이 핵심

---

## 1. 서비스 통신 및 인터페이스 패턴

서비스들이 서로 어떻게 소통하고 데이터를 주고받을지를 결정합니다.

- **API Gateway 패턴**: 클라이언트가 모든 서비스를 개별적으로 호출하는 대신, 단일 진입점(Gateway)을 통해 통신합니다. 인증, 권한 부여, 부하 분산(Load Balancing) 등을 중앙에서 처리합니다.
    
- **Service Discovery 패턴**: 서비스의 위치(IP, 포트)가 동적으로 변하는 환경에서 서비스들이 서로를 자동으로 찾을 수 있게 해줍니다. (예: Netflix Eureka)
    

---

## 2. 데이터 관리 패턴

MSA에서 가장 까다로운 부분은 '데이터의 일관성'을 유지하는 것입니다.

- ==**Database per Service**==: 각 서비스는 자신만의 전용 데이터베이스를 가집니다. 서비스 간 결합도를 낮추지만, 데이터 조인이 어렵다는 단점이 있습니다.
    
- ==**Saga 패턴**==: 여러 서비스에 걸친 분산 트랜잭션을 관리합니다. 한 서비스에서 작업이 실패하면 이를 취소하는 **보상 트랜잭션**을 실행하여 데이터 일관성을 맞춥니다.
    
- ==**CQRS (Command Query Responsibility Segregation)**==: 명령(데이터 변경)과 조회(데이터 읽기)의 모델을 분리하여 성능과 확장성을 최적화합니다.
    

---

## 3. 회복성 및 안정성 패턴

특정 서비스에 장애가 발생했을 때 전체 시스템으로 번지는 것을 막습니다.

- ==**Circuit Breaker (회로 차단기)**==: 특정 서비스에서 반복적으로 에러가 발생하면 호출을 즉시 차단하여 시스템 전체가 마비되는 것을 방지합니다. 장애가 해결되면 다시 연결합니다.
    
- ==**Bulkhead 패턴**==: 배의 격벽처럼 서비스를 그룹화하여 한 구역의 장애가 다른 구역으로 전염되지 않도록 격리합니다.
    

---

## 4. 관찰 가능성(Observability) 패턴

수많은 서비스가 돌아가기 때문에 모니터링이 필수적입니다.

- **Log Aggregation**: 여러 서비스의 로그를 한곳에 모아 관리합니다. (예: ELK 스택)
    
- **Distributed Tracing**: 클라이언트의 요청이 여러 서비스를 거칠 때, 전체 흐름을 추적하여 어디서 병목이나 에러가 생기는지 파악합니다. (예: Jaeger, Zipkin)
    

---

### MSA 도입 시 고려해야 할 점

| **장점**                      | **단점**                |
| --------------------------- | --------------------- |
| 서비스별 기술 스택 자유 선택 가능         | 시스템 전체 구조가 복잡함        |
| 특정 기능만 독립적으로 확장(Scaling) 가능 | 서비스 간 통신 비용(지연 시간) 발생 |
| 부분적인 장애가 전체로 확산되지 않음        | 데이터 일관성 유지가 매우 어려움    |

**MSA**는 무조건적인 정답이 아니라, 서비스의 규모가 커지고 팀 단위 개발이 활발할 때 선택하는 전략입니다.
